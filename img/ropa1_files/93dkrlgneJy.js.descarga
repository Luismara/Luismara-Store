if (self.CavalryLogger) { CavalryLogger.start_js(["+yKZ6"]); }

__d("CometStickyView.react",["CometRouteRenderType","CometViewportMarginsContext","HiddenSubtreePassiveContext","React","mergeRefs","stylex","useResizeObserver"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("CometRouteRenderType").useIsPushView,i=b("React");c=b("React");var j=c.useCallback,k=c.useContext,l=c.useEffect,m=c.useMemo,n=c.useRef,o=c.useState,p={sticky:{position:"lpgh02oy"}},q=((d=window.CSS)==null?void 0:d.supports)&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"));function a(a){__p&&__p();var c=a.bottom,d=a.children,e=a.tagName;e=e===void 0?"div":e;var f=a.top,r=a.topOffset;a=a.xstyle;var s=k(b("HiddenSubtreePassiveContext")),t=h(),u=k(b("CometViewportMarginsContext")),v=r!=null?r+u.top:(r=f)!=null?r:t?16:76;u=o(c==null?v:null);f=u[0];var w=u[1],x=j(function(a){return c!=null&&w(Math.floor(Math.min(v,window.innerHeight-c-a)))},[c,v]),y=b("useResizeObserver")(function(a){var b=s.getCurrentState();b=b.hiddenOrBackgrounded;if(b)return;c!=null&&x(a.height)}),z=n(null);r=m(function(){return b("mergeRefs")(y,z)},[y]);l(function(){__p&&__p();if(c!=null){var a=function(){var a=s.getCurrentState();a=a.hidden;if(a)return;a=z.current;if(a==null)return;x(a.getBoundingClientRect().height)};window.addEventListener("resize",a,{passive:!0});return function(){window.removeEventListener("resize",a,{passive:!0})}}},[c,s,x]);t=f!=null&&q?{top:f}:{};return i.jsx(e,{className:(g||(g=b("stylex")))(a,p.sticky),ref:c!=null?r:null,style:t,children:d})}e.exports=a}),null);