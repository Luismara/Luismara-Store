if (self.CavalryLogger) { CavalryLogger.start_js(["IC1jz"]); }

__d("CometNotificationsFriendRequestListItem_notification.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null};return{kind:"Fragment",name:"CometNotificationsFriendRequestListItem_notification",type:"Notification",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],selections:[a,{kind:"LinkedField",alias:null,name:"title",storageKey:'title(location:"summary")',args:[{kind:"Literal",name:"location",value:"summary"}],concreteType:"TextWithEntities",plural:!1,selections:[b,{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"User",selections:[a,{kind:"ScalarField",alias:null,name:"friendship_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"gender",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"social_context",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[b]}]}]}]},{kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities",args:null}]},{kind:"LinkedField",alias:null,name:"notif_image",storageKey:null,args:[{kind:"Literal",name:"height",value:56},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:56}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"notif_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"notif_sent_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"seen_state",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'},{kind:"LinkedField",alias:null,name:"icon_data",storageKey:null,args:null,concreteType:"GlyphIconData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"reaction_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"glyph_name",args:null,storageKey:null}]}]}}();e.exports=a}),null);
__d("CometNotificationsListPaginationQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"cursor",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"environment",type:"NotificationsStoriesEnvironmentConstants",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null}],b={kind:"Variable",name:"environment",variableName:"environment"},c=[{kind:"Variable",name:"after",variableName:"cursor"},b,{kind:"Variable",name:"first",variableName:"count"},{kind:"Literal",name:"notif_query_flags",value:["IS_COMET"]},{kind:"Literal",name:"source",value:"unknown"}],d={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'},h={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},i={kind:"LinkedField",alias:null,name:"work_foreign_entity_info",storageKey:null,args:null,concreteType:"WorkForeignEntityInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null}]},j={kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CometNotificationsListPaginationQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"CometNotificationsList_viewer",args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}]}]}]},operation:{kind:"Operation",name:"CometNotificationsListPaginationQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"notifications_unseen_count",args:[b],storageKey:null},{kind:"LinkedField",alias:null,name:"notifications",storageKey:null,args:c,concreteType:"NotificationsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NotificationsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Notification",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"title",storageKey:'title(location:"summary")',args:[{kind:"Literal",name:"location",value:"summary"}],concreteType:"TextWithEntities",plural:!1,selections:[e,{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,f,g,{kind:"ScalarField",alias:"profile_url",name:"url",args:null,storageKey:null},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"friendship_status",args:null,storageKey:null},h,{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"gender",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"social_context",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[e]},i]},{kind:"InlineFragment",type:"ExternalUrl",selections:[{kind:"ScalarField",alias:null,name:"external_url",args:null,storageKey:null}]},{kind:"InlineFragment",type:"VideoTimeIndex",selections:[{kind:"ScalarField",alias:null,name:"time_index",args:null,storageKey:null}]},{kind:"InlineFragment",type:"Page",selections:[{kind:"ScalarField",alias:null,name:"category_type",args:null,storageKey:null}]},{kind:"InlineFragment",type:"Group",selections:[i,{kind:"ScalarField",alias:null,name:"work_official_status",args:null,storageKey:null}]}]},j,k]},{kind:"LinkedField",alias:null,name:"image_ranges",storageKey:null,args:null,concreteType:"ImageAtRange",plural:!0,selections:[j,k,{kind:"LinkedField",alias:null,name:"entity_with_image",storageKey:null,args:null,concreteType:null,plural:!1,selections:[f,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scale",args:null,storageKey:null},l,{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null}]},d]}]},{kind:"LinkedField",alias:null,name:"inline_style_ranges",storageKey:null,args:null,concreteType:"InlineStyleAtRange",plural:!0,selections:[j,k,{kind:"ScalarField",alias:null,name:"inline_style",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"aggregated_ranges",storageKey:null,args:null,concreteType:"AggregatedEntitiesAtRange",plural:!0,selections:[j,k,{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"sample_entities",storageKey:null,args:null,concreteType:null,plural:!0,selections:[f,d,{kind:"InlineFragment",type:"User",selections:[h]}]}]}]},{kind:"LinkedField",alias:null,name:"notif_image",storageKey:null,args:[{kind:"Literal",name:"height",value:56},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:56}],concreteType:"Image",plural:!1,selections:[l]},{kind:"ScalarField",alias:null,name:"notif_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"notif_sent_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"seen_state",args:null,storageKey:null},g,{kind:"LinkedField",alias:null,name:"icon_data",storageKey:null,args:null,concreteType:"GlyphIconData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"reaction_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"glyph_name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"notif_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"notif_option_sets",storageKey:'notif_option_sets(notif_option_set_context:{"client_action_types":["HIDE","UNSUB","TOGGLE_ACTIVE","OPEN_IN_INSPECTOR","REPORT_BUG"],"environment":"MAIN_SURFACE","is_comet":true,"supported_display_styles":[{"option_display_styles":["CHEVRON_MENU_OPTION"],"option_set_display_style":"CHEVRON_MENU"}]})',args:[{kind:"Literal",name:"notif_option_set_context",value:{client_action_types:["HIDE","UNSUB","TOGGLE_ACTIVE","OPEN_IN_INSPECTOR","REPORT_BUG"],environment:"MAIN_SURFACE",is_comet:!0,supported_display_styles:[{option_display_styles:["CHEVRON_MENU_OPTION"],option_set_display_style:"CHEVRON_MENU"}]}}],concreteType:"NotificationOptionSetsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NotificationOptionSetsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NotifOptionSet",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"notif_options",storageKey:null,args:null,concreteType:"NotifOptionSetOptionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NotifOptionSetOptionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NotifOption",plural:!1,selections:[d,{kind:"LinkedField",alias:null,name:"notif_option_renderer",storageKey:null,args:null,concreteType:null,plural:!1,selections:[f,{kind:"InlineFragment",type:"NotifOptionHideRenderer",selections:[{kind:"ModuleImport",documentName:"CometNotificationsDropdownMenu_notification",fragmentName:"CometNotificationsDropdownHideMenuItem_notifOptionRenderer",fragmentPropName:"notifOptionRenderer"}]},{kind:"InlineFragment",type:"NotifOptionDefaultRenderer",selections:[{kind:"ModuleImport",documentName:"CometNotificationsDropdownMenu_notification",fragmentName:"CometNotificationsDropdownDefaultMenuItem_notifOptionRenderer",fragmentPropName:"notifOptionRenderer"}]}]}]}]}]},d]}]}]},{kind:"LinkedField",alias:null,name:"notif_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[f,{kind:"InlineFragment",type:"FriendRequestNotifAttachment",selections:[{kind:"ModuleImport",documentName:"CometNotificationsListItemAttachment_notification",fragmentName:"CometNotificationsListItemFriendRequestAttachment_notifAttachments",fragmentPropName:"notifAttachments"}]}]},{kind:"ScalarField",alias:null,name:"www_url_should_open_in_blank_target",args:null,storageKey:null},{kind:"LinkedField",alias:"creation_time",name:"creation_time_with_relative_text",storageKey:null,args:null,concreteType:"CreationTimeWithRelativeText",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"timestamp",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"tracking",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sort_keys",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"eligible_buckets",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"bucket_config",storageKey:null,args:null,concreteType:"NotifBucketConfig",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"bucket_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sec_to_evict_read",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sec_to_evict_seen",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"first_read_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"first_seen_time",args:null,storageKey:null},f,{kind:"ClientExtension",selections:[{kind:"ScalarField",alias:null,name:"is_hidden",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null}]}]},{kind:"LinkedHandle",alias:null,name:"notifications",args:c,handle:"connection",key:"CometNotificationsList_notifications",filters:[]},{kind:"LinkedField",alias:null,name:"actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[f,d]},{kind:"ScalarField",alias:null,name:"last_update_timestamp",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"CometNotificationsListPaginationQuery",id:"3089593317731731",text:null,metadata:{derivedFrom:"CometNotificationsList_viewer",isRefetchableQuery:!0}}}}();e.exports=a}),null);
__d("CometNotificationsList_viewer.graphql",["CometNotificationsListPaginationQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["notifications"];return{kind:"Fragment",name:"CometNotificationsList_viewer",type:"Viewer",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:a}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:a},operation:b("CometNotificationsListPaginationQuery.graphql"),fragmentPathInResult:["viewer"]}},argumentDefinitions:[{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"cursor",type:"ID",defaultValue:null},{kind:"RootArgument",name:"environment",type:"NotificationsStoriesEnvironmentConstants"},{kind:"RootArgument",name:"scale",type:"Float"}],selections:[{kind:"ScalarField",alias:null,name:"notifications_unseen_count",args:[{kind:"Variable",name:"environment",variableName:"environment"}],storageKey:null},{kind:"LinkedField",alias:"notifications",name:"__CometNotificationsList_notifications_connection",storageKey:null,args:null,concreteType:"NotificationsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NotificationsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Notification",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sort_keys",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"eligible_buckets",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"bucket_config",storageKey:null,args:null,concreteType:"NotifBucketConfig",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"bucket_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sec_to_evict_read",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"sec_to_evict_seen",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"first_read_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"first_seen_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"seen_state",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"CometNotificationsFriendRequestListItem_notification",args:null},{kind:"FragmentSpread",name:"CometNotificationsListItem_notification",args:null}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"FragmentSpread",name:"CometNotificationsListItem_actor",args:null}]},{kind:"ScalarField",alias:null,name:"last_update_timestamp",args:null,storageKey:null}]}}();e.exports=a}),null);
__d("FriendingCometFriendRequestHideUpdate",["CometRelay","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CometRelay").ConnectionHandler,h=b("CometRelay").VIEWER_ID,i=b("CometRelay").commitLocalUpdate;function j(a,c){a=a.get(h);if(a==null)return;var d=g.getConnection(a,b("qex")._("1188508")?"CometNotificationsRowList_notifications_page":"CometNotificationsList_notifications");if(d==null)return;c.forEach(function(a){g.deleteNode(d,a)})}function a(a,b){i(a,function(a){j(a,b)})}e.exports={commitHideLocalUpdate:a}}),null);
__d("CometNotificationsFriendRequestListItem.react",["fbt","requireDeferred","CometBadge.react","CometFocusTableContext","CometInlineEntityRenderer","CometLink.react","CometNotificationsMarkReadMutation","CometRelativeTimestamp.react","CometRelay","CometTextWithEntities.react","FriendingCometErrorHandler.react","FriendingCometFriendRequestConfirmMutation","FriendingCometFriendRequestDeleteMutation","FriendingCometMutualFriendsText.react","FriendingCometTestIDHelper","React","TetraAccessoryListCell.react","TetraButtonGroup.react","TetraIcon.react","TetraText.react","UntruncatedNotificationsTypedLoggerLite","absoluteToRelative","cometNotificationsListItemIcon","gkx","scrollIntoView","stylex","useCometDeferredDialog","useScrollToNotif","useVisibilityObserver","CometNotificationsFriendRequestListItem_notification.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("requireDeferred")("CometAdditionalBlockingActionsDialog.react");b("CometRelay").graphql;var j=b("CometRelay").useFragment,k=b("CometRelay").useRelayEnvironment,l=b("FriendingCometErrorHandler.react").useFriendingErrorHandler,m=b("React");c=b("React");var n=c.useCallback,o=c.useContext,p=c.useLayoutEffect,q=c.useRef,r=b("UntruncatedNotificationsTypedLoggerLite").log,s=b("useScrollToNotif").useScrollToNotif,t=0;function u(a){a=a.children;return a}function a(a){__p&&__p();var c,d,e,f,v,w,x=a.handleNotificationVisible,y=a.onResponded,z=k(),A=b("useCometDeferredDialog")(i),B=A[0];A=j(h!==void 0?h:h=b("CometNotificationsFriendRequestListItem_notification.graphql"),a.notification);var C=q(null),D=A==null?void 0:(c=A.title)==null?void 0:(c=c.ranges[0])==null?void 0:(c=c.entity)==null?void 0:c.id,E=l({addFriendId:(c=D)!=null?c:"0",addFriendSource:"friend_other"});c=(c=A==null?void 0:(c=A.title)==null?void 0:(c=c.ranges[0])==null?void 0:(c=c.entity)==null?void 0:(c=c.social_context)==null?void 0:c.text)!=null?c:"";var F=A==null?void 0:A.seen_state;d=A==null?void 0:(d=A.title)==null?void 0:(d=d.ranges[0])==null?void 0:(d=d.entity)==null?void 0:d.friendship_status;var G=A==null?void 0:(e=A.title)==null?void 0:(e=e.ranges[0])==null?void 0:(e=e.entity)==null?void 0:e.gender,H=A==null?void 0:(e=A.title)==null?void 0:(e=e.ranges[0])==null?void 0:(e=e.entity)==null?void 0:e.short_name;e=F==="SEEN_AND_READ";var I=A==null?void 0:A.notif_sent_time,J=1e3,K=A==null?void 0:A.id,L=n(function(){F==="UNSEEN_AND_UNREAD"&&x&&x()},[x,F]);L=b("useVisibilityObserver")({onVisible:L});var M=n(function(){D!=null&&(b("FriendingCometFriendRequestConfirmMutation").commit(z,D,"griffin_tab",void 0,E),y&&y())},[z,E,D,y]),N=n(function(){if(D!=null){b("FriendingCometFriendRequestDeleteMutation").commit(z,D,"griffin_tab",void 0,E);y&&y();if(!b("gkx")("1142051")||D==null)return;B({gender:G,name:H,requesterId:D})}},[z,E,D,G,y,H,B]),O=a.onClick,P=a.onClose,Q=n(function(){K!=null&&b("CometNotificationsMarkReadMutation")(z,{input:{is_comet:!0,notif_id:K,source:"unknown"}}),O&&O(),P&&P()},[z,K,O,P]),R=A.notif_image,S=A.notif_type,T=A.title;f=(f=A==null?void 0:A.url)!=null?f:"#";f=window.location.hostname.startsWith("www.facebook.com")?f:f.includes("developers.facebook.com")?f:b("absoluteToRelative")(f);var U=s(f),V=U[0],W=U[1],X=W.current;U=o(b("CometFocusTableContext"));var Y=U.FocusCell;U=U.FocusRow;U=(U=U)!=null?U:u;Y=(Y=Y)!=null?Y:u;p(function(){C.current!=null&&X&&(b("scrollIntoView")(C.current,{behavior:"auto",verticalAlign:"center"}),W.current=!1)},[X,W]);v=T==null?void 0:(v=T.ranges[0])==null?void 0:(v=v.entity)==null?void 0:v.name;var Z=v!=null?m.jsx(b("CometTextWithEntities.react"),{ranges:[{entity:{__typename:"Inline",inline_style:"BOLD"},length:v.length,offset:0}],renderers:{Inline:[b("CometInlineEntityRenderer")]},text:g._("{fullName} te ha enviado una solicitud de amistad.",[g._param("fullName",v)]).toString()}):null;R=R==null?void 0:R.uri;if(R==null||T==null||v==null)return null;T=T==null?void 0:(T=T.text)==null?void 0:T.length;T!=null&&T>t&&r({length:T,notification_type:S});S=(T=A.icon_data)==null?void 0:T.reaction_type;A=(T=A.icon_data)==null?void 0:T.glyph_name;T=b("cometNotificationsListItemIcon")(A,S);A=T!=null?{icon:m.jsx(b("TetraIcon.react"),{color:"white",icon:T}),size:28,type:"activityBadge"}:null;Q=f!=null?{onNavigate:Q,replace:(S=a.replace)!=null?S:void 0,routeTarget:(T=a.routeTarget)!=null?T:void 0,url:f}:void 0;S={addOn:A,alt:v,linkProps:Q,shape:"circle",size:56,source:{uri:R},type:"profile-photo"};T=d==="INCOMING_REQUEST"?{component:m.jsx(b("TetraButtonGroup.react"),{paddingTop:0,primary:{label:g._("Confirmar"),onPress:M,testid:"confirm_button"},secondary:{label:g._("Eliminar"),onPress:N,testid:"ignore_button"},size:"medium"}),type:"buttons"}:null;var $;d==="ARE_FRIENDS"?$=g._("Solicitud aceptada"):d==="CAN_REQUEST"&&($=g._("Solicitud eliminada"));v=(A=$)!=null?A:"";v===""?v=D!=null&&c!==""?m.jsx(b("FriendingCometMutualFriendsText.react"),{id:D,socialContextText:c,textType:"body4"}):null:v=m.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:v});Q=I!=null?new Date(I*J):null;M=m.jsx("div",{className:"cbu4d94t j83agx80","data-testid":void 0,ref:L,children:(R=v)!=null?R:Q!=null?m.jsx(b("TetraText.react"),{color:e?"secondary":"highlight",type:"body4",children:m.jsx(b("CometRelativeTimestamp.react"),{date:Q,format:"normal"})}):null});N=m.jsxs(m.Fragment,{children:[m.jsx(Y,{children:m.jsx("div",{role:"gridcell",children:m.jsx(b("CometLink.react"),{href:f,onClick:O,routeTarget:a.routeTarget,weight:"normal",children:Z})})}),m.jsx(Y,{children:m.jsx("div",{role:"gridcell",tabIndex:-1,children:M})})]});return m.jsx("div",{"data-testid":void 0,role:"row",children:m.jsx(U,{children:m.jsx(b("TetraAccessoryListCell.react"),{addOnBottom:T,addOnPrimary:S,addOnSecondary:e?null:{addOn:m.jsx("div",{className:"j83agx80",children:m.jsx(b("CometBadge.react"),{color:"blue",isProfileBadge:!0,size:12})}),type:"body"},body:N,bodyColor:e?"secondary":"primary",ref:C,selected:V,testid:void 0})})})}e.exports=a}),null);
__d("CometNotificationsList.react",["fbt","requireDeferred","CometErrorBoundary.react","CometInfiniteScrollSuspenseList.react","CometListItemGlimmer.react","CometNoNotifications.react","CometNotificationsContext","CometNotificationsFocusTable.react","CometNotificationsFriendRequestListItem.react","CometNotificationsInteractionLogger","CometNotificationsInteractionLoggingContext","CometNotificationsListItem.react","CometNotificationsRenderLocations","CometNotificationsScrollHoldingContainer.react","CometNotificationsUpdateAllSeenStateMutation","CometOnRefresh.react","CometRelay","FriendingCometFriendRequestHideUpdate","FriendingCometFriendRequestsMarkAllSeenMutation","GriffinTabOpenFalcoEvent","HiddenSubtreeContext","JSTracing","React","TabbableScopeQuery.react","TetraUnit.react","TetraUnitHeader.react","XCometFriendsRequestsControllerRouteBuilder","XCometNotificationsControllerRouteBuilder","clearTimeout","cometRouteMatcher","gkx","recoverableViolation","setupNotificationsSubscription","stylex","useCometInteractionTracing","useHandleNotificationVisible","useLogMarkAllAsSeenNotFired","useSimpleImpression","useSuspenseTransition","CometNotificationsList_viewer.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("CometNotificationsInteractionLoggingContext").CometNotificationsInteractionLoggingContext,j=b("CometOnRefresh.react").useOnRefresh;b("CometRelay").graphql;var k=b("CometRelay").usePaginationFragment,l=b("CometRelay").useRelayEnvironment,m=b("FriendingCometFriendRequestHideUpdate").commitHideLocalUpdate,n=b("requireDeferred")("NotifListBottomCollisionFalcoEvent"),o=b("React");c=b("React");var p=c.useCallback,q=c.useContext,r=c.useEffect,s=c.useImperativeHandle,t=c.useRef,u=b("cometRouteMatcher").useRouteUrlMatcher,v="MAIN_SURFACE",w="COMET_DESKTOP",x=function(a,c,d){if(a.current.size===0||d==null)return;var e=b("gkx")("1264016")?v:w;b("CometNotificationsUpdateAllSeenStateMutation")(c,{environment:e,input:{environment:e,is_comet:!0,latest_time_sent:d,notif_ids:Array.from(a.current),source:"unknown",update_type:"read"}},{onError:function(a){b("recoverableViolation")("Mark all as read mutation failed with an error: ","Notifications",{error:a})},onSuccess:function(){}})},y={timeoutMs:45*1e3};function z(a,c){b("recoverableViolation")("[CometNotificationsList] "+c+" suffered an uncaught error","comet_notifications",{error:a})}function a(a,c){__p&&__p();var d=l(),e=b("useSuspenseTransition")(y),f=e[0],v=e[1],w=a.isFromPageNotification,B=b("gkx")("1126689");e=k(h!==void 0?h:h=b("CometNotificationsList_viewer.graphql"),a.viewer);var C=e.data,D=e.hasNext,E=e.isLoadingNext,F=e.loadNext,G=e.refetch,H=C.last_update_timestamp,I=t([]),J=C.actor,K=(e=(e=C.notifications)==null?void 0:e.edges)!=null?e:[],L=[],M=[],N=[];e=(e=K[0])==null?void 0:(e=e.node)==null?void 0:e.id;var O=q(b("CometNotificationsContext")),P=O.renderLocation===b("CometNotificationsRenderLocations").RAIL,Q=O.renderLocation===b("CometNotificationsRenderLocations").DROPDOWN?void 0:"self";O=u();var R=O(b("XCometNotificationsControllerRouteBuilder").buildURL({}).toString()).selectedRoot,S=t(new Set());s(c,function(){return{markAllNotificationsAsRead:function(){x(S,d,H)}}});O=p(function(){if(B)return;b("JSTracing").clear(function(){b("FriendingCometFriendRequestsMarkAllSeenMutation").commit(d,{}),b("GriffinTabOpenFalcoEvent").log(function(){return{}})})},[d,B]);b("useSimpleImpression")(O);var T=b("useHandleNotificationVisible")(S,d,H),U=t(K.length);r(function(){U.current=K.length},[K.length]);var V=q(i);r(function(){if(!v){var a=V.notifsLoadAttemptTimeoutRef,c=V.notifsLoadCompleteRef;a&&b("clearTimeout")(a.current);c&&(c.current=!0);b("CometNotificationsInteractionLogger").success(U.current)}},[V,v,U]);c=p(function(){if(v)return;f(function(){G({},{fetchPolicy:"network-only"})})},[v,G,f]);j(c);var W=b("useCometInteractionTracing")(30605314,"fluid","TAIL_LOAD");O=p(function(){if(E||!D)return;n.onReady(function(a){return a.log(function(){return{}})});W(function(){F(10)})},[E,D,W,F]);r(function(){K.forEach(function(a){a=a.node;a&&a.id!=null&&S.current.add(a.id)})},[K,S]);r(function(){var a=b("setupNotificationsSubscription")(d);return function(){a.dispose(),T.dispose()}},[d,T]);c=!1;C=C==null?void 0:C.notifications_unseen_count;K.forEach(function(d,e){__p&&__p();e=d.node;if(!e)return;d=e==null?void 0:e.seen_state;d==="UNSEEN_AND_UNREAD"&&(c=!0);d=e.eligible_buckets;var f=e.seen_state,g=d.some(function(a){return a==="FRIEND_REQUESTS"});if(f==="UNSEEN_AND_UNREAD"){L.push({isFriendRequest:g,notification:e});return}var h=null,i=e==null?void 0:e.bucket_config;i&&(h=i.find(function(a){return a.bucket_type==="PRIORITY_INBOX"}));i=d.includes("PRIORITY_INBOX")&&A((i=h)==null?void 0:i.sec_to_evict_read,e==null?void 0:e.first_read_time)&&A((d=h)==null?void 0:d.sec_to_evict_seen,e==null?void 0:e.first_seen_time)&&L.length<15;if(i)L.push({isFriendRequest:g,notification:e});else{h=g?o.jsx(b("CometErrorBoundary.react"),{fallback:null,onError:function(a){return z(a,"CometNotificationsFriendRequestListItem")},children:o.jsx(b("CometNotificationsFriendRequestListItem.react"),{handleNotificationVisible:T,notification:e,onClose:a.onClose,replace:P&&!R?!0:void 0,routeTarget:R?"content":Q})},e.id):o.jsx(b("CometErrorBoundary.react"),{fallback:null,onError:function(a){return z(a,"CometNotificationsListItem")},children:o.jsx(b("CometNotificationsListItem.react"),{actor:J,handleNotificationVisible:T,isFromPageNotification:w,notification:e,onClose:a.onClose,replace:P&&!R?!0:void 0,routeTarget:R?"content":Q})},e.id);g&&f!=="UNSEEN_AND_UNREAD"?M.push(h):N.push(h)}});L.sort(function(a,b){return parseInt(b==null?void 0:b.notification.sort_keys[1],10)-parseInt(a==null?void 0:a.notification.sort_keys[1],10)});var X=q(b("HiddenSubtreeContext")).hiddenOrBackgrounded_FIXME;b("useLogMarkAllAsSeenNotFired")({notifBadgeCount:C,willCallMarkAllAsSeen:c});var Y=function(a){return function(){a!=null&&(I.current=[].concat(I.current,[a]))}};r(function(){X&&I.current.length>0&&(m(d,I.current),I.current=[])},[d,X]);C=L.map(function(c){var d=c.isFriendRequest;c=c.notification;return d?o.jsx(b("CometErrorBoundary.react"),{fallback:null,onError:function(a){return z(a,"CometNotificationsFriendRequestListItem")},children:o.jsx(b("CometNotificationsFriendRequestListItem.react"),{handleNotificationVisible:T,notification:c,onClose:a.onClose,onResponded:Y(c.id),replace:P&&!R?!0:void 0,routeTarget:R?"content":Q})},c.id):o.jsx(b("CometErrorBoundary.react"),{fallback:null,onError:function(a){return z(a,"CometNotificationsListItem")},children:o.jsx(b("CometNotificationsListItem.react"),{actor:J,handleNotificationVisible:T,isFromPageNotification:w,notification:c,onClose:a.onClose,replace:P&&!R?!0:void 0,routeTarget:R?"content":Q})},c.id)});var Z=[];if(C.length===0&&M.length===0)Z.push(o.jsx(b("CometNotificationsFocusTable.react"),{allowModifiers:!0,label:g._("Notificaciones"),tabScopeQuery:b("TabbableScopeQuery.react"),wrapXToNextLine:!0,children:N},"notifications-grid"));else{var $=b("XCometFriendsRequestsControllerRouteBuilder").buildURL({ref:"notifications_friending_tab_see_all_friend_requests"});Z.push(C.length>0?o.jsx("div",{className:"sxpk6l6v",children:o.jsx(b("TetraUnit.react"),{header:o.jsx(b("TetraUnitHeader.react"),{headline:g._("Nuevas"),level:3}),children:o.jsx(b("CometNotificationsFocusTable.react"),{allowModifiers:!0,label:g._("Nuevas notificaciones"),tabScopeQuery:b("TabbableScopeQuery.react"),wrapXToNextLine:!0,children:C})})},"new"):null,M.length>0?o.jsx("div",{className:"sxpk6l6v",children:o.jsx(b("TetraUnit.react"),{header:o.jsx(b("TetraUnitHeader.react"),{action:g._("Ver todo"),actionLinkProps:{url:$},headline:g._("Solicitudes de amistad"),level:3}),children:o.jsx("div",{className:"aahdfvyu",children:o.jsx(b("CometNotificationsFocusTable.react"),{allowModifiers:!0,label:g._("Solicitudes de amistad"),tabScopeQuery:b("TabbableScopeQuery.react"),wrapXToNextLine:!0,children:M})})})},"friend_section"):null,N.length>0?o.jsx("div",{className:"sxpk6l6v",children:o.jsx(b("TetraUnit.react"),{header:o.jsx(b("TetraUnitHeader.react"),{headline:g._("Anteriores"),level:3}),children:o.jsx("div",{className:"aahdfvyu",children:o.jsx(b("CometNotificationsFocusTable.react"),{allowModifiers:!0,label:g._("Notificaciones anteriores"),tabScopeQuery:b("TabbableScopeQuery.react"),wrapXToNextLine:!0,children:N})})})},"earlier_section"):null)}return o.jsxs("div",{"data-testid":void 0,children:[v&&o.jsx(b("CometListItemGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:1}),K.length>0?o.jsx("div",{className:"tr9rh885",children:o.jsx(b("CometNotificationsScrollHoldingContainer.react"),{firstNotificationID:e,children:o.jsx(b("CometInfiniteScrollSuspenseList.react"),{hasMore:D,isLoading:E,listGlimmer:o.jsx(b("CometListItemGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:2}),onLoadMore:O,children:Z.filter(Boolean)})})}):o.jsx(b("CometNoNotifications.react"),{})]})}function A(a,b){if(a==null||b==null)return!0;var c=Date.now()/1e3;return a===-1||b===0?!0:c-b<a}e.exports=o.forwardRef(a)}),null);