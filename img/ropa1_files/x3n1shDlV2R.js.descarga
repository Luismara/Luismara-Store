if (self.CavalryLogger) { CavalryLogger.start_js(["6jPm3"]); }

__d("CometFeedStoryAlbumAttachment_attachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"CometFeedStoryAlbumAttachment_attachment",type:"StoryAttachment",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],selections:[{kind:"ScalarField",alias:null,name:"mediaset_token",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"all_subattachments",storageKey:"all_subattachments(first:5)",args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"deduplication_key",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"is_playable",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:584}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null}]},{kind:"InlineFragment",type:"Photo",selections:[a,b,{kind:"ScalarField",alias:null,name:"accessibility_caption",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"focus",storageKey:null,args:null,concreteType:"Vect2",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"CometAlbumGridLayoutChild_photo",args:null}]},{kind:"InlineFragment",type:"Video",selections:[a,b,{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[b]},{kind:"ScalarField",alias:null,name:"playable_url",args:null,storageKey:null},{kind:"FragmentSpread",name:"CometAlbumGridLayoutChild_video",args:null}]}]},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'}]}]}]}}();e.exports=a}),null);
__d("CometFeedStoryAlbumAttachment.react",["CometAlbumGridLayout.react","React","RelayHooks","XCometPhotoControllerRouteBuilder","XCometVideoControllerRouteBuilder","recoverableViolation","CometFeedStoryAlbumAttachment_attachment.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React");b("RelayHooks").graphql;var i=b("RelayHooks").useFragment;function j(a,b){var c=a==null?void 0:a.deduplication_key;if(c!=null)return c;c=a==null?void 0:(c=a.media)==null?void 0:(a=c.image)==null?void 0:a.uri;return c!=null?c:"attachment-"+b}function k(a,c){__p&&__p();return c==null?[]:c.map(function(c,d){__p&&__p();var e,f,g,h,i,k;e=(e=c.media)==null?void 0:e.image;var l=c==null?void 0:c.url;f=(f=c.media)==null?void 0:f.id;g=(g=c.media)==null?void 0:g.is_playable;h=(h=c.media)==null?void 0:h.playable_url;if(e==null||l==null||g===!0&&h==null)return null;h=(h=c.media)==null?void 0:(h=h.owner)==null?void 0:h.id;l=l;g===!0?a!=null&&a!==""&&f!=null&&h!=null&&(l=b("XCometVideoControllerRouteBuilder").buildURL({page_token:h,set:a,story_token:f})):a!=null&&a!==""&&f!=null&&(l=b("XCometPhotoControllerRouteBuilder").buildURL({fbid:f,set:a}));h=e.height;f=e.uri;e=e.width;if(f==null||h==null||e==null)return null;d=j(c,d);i=(i=c==null?void 0:c.media)!=null?i:null;return{accessibilityCaption:(k=c.media)==null?void 0:k.accessibility_caption,focusX:(k=c.media)==null?void 0:(k=k.focus)==null?void 0:k.x,focusY:(k=c.media)==null?void 0:(c=k.focus)==null?void 0:c.y,height:h,id:d,isPlayable:g===!0,photo:(i==null?void 0:i.__typename)==="Photo"?i:null,uri:f,url:l,video:(i==null?void 0:i.__typename)==="Video"?i:null,width:e}}).filter(Boolean)}var l=g!==void 0?g:g=b("CometFeedStoryAlbumAttachment_attachment.graphql");function a(a){__p&&__p();var c=i(l,a.attachment);if(c==null){b("recoverableViolation")("attachment cannot be nullish in CometFeedStoryAlbumAttachmentStyle","comet_feed");return null}var d=c==null?void 0:c.all_subattachments;c=c==null?void 0:c.mediaset_token;c=k(c,d==null?void 0:d.nodes);if(d==null||c.length<1){b("recoverableViolation")("subattachments cannot be nullish or empty in CometFeedStoryAlbumAttachmentStyle","comet_feed");return null}d=d.count||0;d=d===c.length?0:d-c.length+1;return h.jsxs("div",{children:[h.jsx(b("CometAlbumGridLayout.react"),{adID:a.adID,attachments:c,hasProductTags:a.hasProductTags,initialTracePolicy:a.initialTracePolicy,numItemsNotShown:d,subOrigin:a.subOrigin,urls:a.urls}),a.productTagOverlay]})}e.exports=a}),null);