if (self.CavalryLogger) { CavalryLogger.start_js(["aYysc"]); }

__d("XVideoComposerFetchDialogControllerRouteBuilder",["cometRouteBuilder"],(function(a,b,c,d,e,f){a=b("cometRouteBuilder")("/video/composer/fetch_dialog/",Object.freeze({}),void 0);e.exports=a}),null);
__d("PagesCometComposerMediaFileSelector.react",["fbt","CometFileSelector.react","JSResource","React","XVideoComposerFetchDialogControllerRouteBuilder","cometUniqueID","gkx","isMimeTypeForMedia","useCometLazyDialog","useCometPageComposerTrigger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React");c=b("React");var i=c.useCallback,j=b("isMimeTypeForMedia").isMimeTypeForPhoto,k=b("isMimeTypeForMedia").isMimeTypeForVideo,l=b("JSResource")("CometCompatModal.react").__setRef("PagesCometComposerMediaFileSelector.react");function a(a){__p&&__p();var c=a.actorID,d=a.children,e=a.composerEntryPointRef,f=a.mediaTypes,m=a.multiple,n=a.pageID;a=g._("Crear publicaci\u00f3n");a=b("useCometPageComposerTrigger")(c,n,a);var o=a[0];a=b("useCometLazyDialog")(l);var p=a[0];a=i(function(a){__p&&__p();if(a==null)return;a=Array.from(a);if(c===n&&f.video&&b("gkx")("1344850")&&a.length===1&&k(a[0].type)){var d=a[0],g=b("XVideoComposerFetchDialogControllerRouteBuilder").buildURL({entry_point_ref:e,page_id:n});g={rel:"dialog-post",uri:g};var h=function(a){a.addListener("video-composer-bootloader-ready",function(b){a.sendChildFrameMessage({compatAction:"video-composer-file",file:d})});return function(){return a.removeAllListeners("video-composer-bootloader-ready")}};p({customCompatEventHandler:h,params:g});return}h=a.map(function(a){var c=b("cometUniqueID")();a.uploadID=c;if(f.photo&&j(a.type))return{data:{id:c},file:a,fileType:"PHOTO",state:"NEW"};if(f.video&&k(a.type))return{data:{id:c},file:a,fileType:"VIDEO",state:"NEW"}}).filter(Boolean);o({additionalMediaAttachmentItems:h})},[c,e,f.photo,f.video,n,o,p]);var q=[];f.photo&&(q=["image/*","image/heif","image/heic","video/*"]);f.video&&(q=[].concat(q,["video/*"]));return h.jsx(b("CometFileSelector.react"),{accept:q,multiple:m||!1,onFilesSelected:a,children:function(a){return d(a)}})}e.exports=a}),null);